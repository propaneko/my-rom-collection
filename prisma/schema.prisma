generator client {
  provider = "prisma-client"
  output   = "../app/generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model Rom {
  id         Int       @id @default(autoincrement())
  ino        Int       @unique // filesystem inode number
  name       String
  parentPath String
  fullPath   String    @unique
  size       BigInt? // bytes
  system     String
  extension  String? // file extension, e.g., "nds", "iso", etc.
  metadata   Metadata? @relation("RomMetadata")

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Metadata {
  id    Int @id @default(autoincrement())
  rom   Rom @relation("RomMetadata", fields: [romId], references: [id], onDelete: Cascade)
  romId Int @unique

  gameId     String?
  systemId   String?
  systemName String?

  title       String?
  description String? @db.Text
  year        String?
  developer   String?
  publisher   String?
  media       Json? // JSON array of media objects

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}
